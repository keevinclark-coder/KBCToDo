# Render Blueprint: frontend (static), API (web), DB (postgres)
# Deploy: Dashboard → New → Blueprint → connect keevinclark-coder/KBCToDo → Apply

databases:
  - name: kbctodo-db
    databaseName: kbctodo
    user: kbctodo
    plan: free
    region: oregon

services:
  - type: web
    name: KBCToDo-API
    runtime: node
    region: oregon
    plan: free
    repo: https://github.com/keevinclark-coder/KBCToDo
    branch: main
    rootDir: backend
    buildCommand: npm install && npx prisma generate && npm run build
    startCommand: npx prisma migrate deploy && node dist/index.js
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: kbctodo-db
          property: connectionString

  - type: web
    name: KBCToDo
    runtime: static
    buildCommand: npm install && npm run build
    staticPublishPath: dist
    repo: https://github.com/keevinclark-coder/KBCToDo
    branch: main
    envVars:
      - key: VITE_API_URL
        sync: false
# After deploy: set VITE_API_URL on KBCToDo (frontend) to your KBCToDo-API URL (e.g. https://kbctodo-api.onrender.com)
